name: main-workflow

env:
  IMAGE_REPOSITORY: vardominator/foobar

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  # # run all unit tests
  # run-tests:
  #   runs-on: ubuntu-latest
  #   steps:
  #     # check out the pull request's source code
  #     - name: check out source code
  #       uses: actions/checkout@v2

  #     # install go
  #     - name: set up go
  #       uses: actions/setup-go@v2-beta
  #       with:
  #         go-version: "^1.14"
  #     - name: print go version
  #       run: go version

  #     # run unit tests
  #     - name: run unit tests
  #       run: go test -v ./...

  # build-and-release:
  #   runs-on: self-hosted
  #   steps:
  #     # check out source code
  #     - name: check out source code
  #       uses: actions/checkout@v2
      
  #     # build and push container images
  #     - name: build and bush container images
  #       uses: docker/build-push-actions@v1
  #       with:
  #         username: ${{ secrets.DOCKER_USERNAME }}
  #         password: ${{ secrets.DOCKER_PASSWORD }}
  #         repository: ${{ env.IMAGE_REPOSITORY }}
  #         tag_with_ref: true
  #         tag_with_sha: true

  test-container-signing:
    runs-on: self-hosted
    steps:
      - name: test docker
        uses: Vardominator/docker-notary-action@master
